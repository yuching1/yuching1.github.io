<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <title>台灣感性</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Mapbox -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet" />
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&family=Noto+Serif+TC:wght@400;700&display=swap" rel="stylesheet">

  <!-- GSAP -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>

  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    html{height:auto}
    body{
      font-family: 'Noto Sans TC', sans-serif;
      background:#f5f0e8;
      -webkit-font-smoothing:antialiased;
      overflow-x:hidden;
    }

    /* ---------- INTRO 4-slice ---------- */
    #intro-container{
      position:fixed; inset:0;
      width:100vw;height:100vh;
      z-index:99999;
      perspective:1200px;
      overflow:hidden;
      display:block;
      background:#000;
    }
    .intro-slice{
      position:absolute;
      top:0;
      height:100vh;
      width:25vw;
      transform-origin:left center;
      background-image: url('images/intro.jpg');
      background-repeat:no-repeat;
      background-size:100vw 100vh;
      backface-visibility:hidden;
      /* subtle box shadow for depth */
      box-shadow: 0 30px 80px rgba(0,0,0,0.5);
    }
    .intro-slice:nth-child(1){ left:0; background-position:0% 50%;}
    .intro-slice:nth-child(2){ left:25vw; background-position:33% 50%;}
    .intro-slice:nth-child(3){ left:50vw; background-position:66% 50%;}
    .intro-slice:nth-child(4){ left:75vw; background-position:100% 50%;}

    /* overlay that becomes the semi-transparent background after intro */
    #intro-bg-overlay{
      position:fixed; inset:0;
      background: rgba(0,0,0,0);
      z-index:90000;
      opacity:0;
      pointer-events:none;
      transition:opacity .8s ease;
    }
    
    /* Title shown after intro flip */
    #intro-title{
      position:fixed; inset:0;
      z-index:99998;
      display:flex; align-items:center; justify-content:center;
      pointer-events:none;
      opacity:0;
    }
    #intro-title h1{
      font-family:'Noto Serif TC', serif;
      font-size:5rem;
      color:#2d3319;
      letter-spacing:.2em;
      text-align:center;
      font-weight:700;
    }

    /* ---------- Header (keeps on top) ---------- */
    header{
      position:fixed; left:0; right:0; top:0;
      padding:25px 50px;
      display:flex; justify-content:space-between; align-items:center;
      z-index:100;
      transition: background .3s;
    }
    header .logo{
      font-family:'Noto Serif TC', serif;
      font-weight:700; font-size:1.4rem;
      color:#2d3319;
      letter-spacing:.1em;
    }
    header nav{ display:flex; gap:35px; }
    header nav div{ cursor:pointer; color:rgba(45,51,25,0.7); font-size:.95rem; letter-spacing:.05em; }

    header.scrolled{ background: rgba(245,240,232,0.95); backdrop-filter: blur(10px); border-bottom: 1px solid rgba(0,0,0,0.05); }

    /* ---------- Map Section (full screen) ---------- */
    #map-section{ width:100%; height:100vh; position:relative; }
    #map{ width:100%; height:100%; }
    #map-overlay{
      position:absolute; inset:0;
      background: radial-gradient(circle at center, transparent 30%, rgba(0,0,0,0.45) 100%);
      opacity:0; transition:opacity .8s; pointer-events:none; z-index:5;
    }
    #map-overlay.show{ opacity:1; }

    .photo-container{
      position:absolute; left:50%; top:50%;
      transform:translate(-50%,-50%);
      width:500px; height:350px;
      z-index:10; opacity:0; pointer-events:none;
      transition: opacity .8s, transform .8s;
      overflow:hidden;
    }
    .photo-container.show{ opacity:1; }
    .photo-container img{ width:100%; height:100%; object-fit:cover; display:block; box-shadow: 0 20px 60px rgba(0,0,0,.35); }
    .photo-caption{
      position:absolute; bottom:0; left:0; right:0;
      background:linear-gradient(to top, rgba(0,0,0,0.8), transparent);
      color:#fff; padding:20px; text-align:left;
      z-index:5;
    }
    .photo-caption h3{ font-size:1.2rem; margin-bottom:4px; font-weight:600; }
    .photo-caption p{ font-size:0.9rem; opacity:0.9; }

    #scroll-indicator{ position:absolute; left:50%; bottom:40px; transform:translateX(-50%); z-index:30; color:#fff; display:flex; flex-direction:column; align-items:center; gap:8px; }
    #scroll-indicator .line{ width:1px; height:40px; background:#fff; animation:scrollLine 2s infinite; }
    @keyframes scrollLine{0%,100%{opacity:0;transform:translateY(-20px)}50%{opacity:1;transform:translateY(0)}}

    /* ---------- Chapter Intro ---------- */
    .chapter-intro{ height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center; padding:0 50px; background:#f5f0e8; }
    .chapter-intro h1{ font-family:'Noto Serif TC', serif; font-size:4rem; color:#2d3319; margin-bottom:20px; letter-spacing:.15em; }
    .chapter-intro p{ max-width:800px; font-size:1.3rem; color:rgba(45,51,25,0.7); line-height:2; font-weight:300; }

    /* ---------- Chapter Cover (full-screen image) ---------- */
    .chapter-cover{
      width:100%; height:100vh;
      background-size:cover;
      background-position:center;
      background-repeat:no-repeat;
      background-attachment:fixed;
      position:relative;
      display:flex; align-items:center; justify-content:center;
    }
    #chapter1{
      background-image: url('./images/c1.jpg');
      background-color: #f5f0e8;
    }
    .chapter-cover-overlay{
      position:absolute; inset:0;
      background:rgba(0,0,0,0.4);
      z-index:1;
    }
    .chapter-cover-content{
      position:relative; z-index:2;
      text-align:center; color:#fff;
    }
    .chapter-cover-content h1{
      font-family:'Noto Serif TC', serif;
      font-size:3.5rem;
      margin-bottom:20px;
      letter-spacing:.15em;
      font-weight:700;
    }
    .chapter-cover-content p{
      font-size:1.8rem;
      font-weight:300;
      letter-spacing:.1em;
    }

    /* ---------- Timeline (horizontal scroll via GSAP) ---------- */
    #timeline-wrapper{ 
      width:100%; height:auto; min-height:100vh; 
      position:relative; overflow:hidden; 
      background:#f5f0e8; 
      padding: 80px 0;
    }
    .timeline-section { padding: 40px 0; }
    .timeline-header{ text-align:center; margin-bottom:60px; padding: 0 50px; }
    .timeline-header h2{ 
      font-family:'Noto Serif TC', serif; 
      font-size:2.8rem; 
      color:#2d3319; 
      margin-bottom:15px;
      letter-spacing:.1em;
    }
    .timeline-header p{ 
      font-size:1.1rem; 
      color:rgba(45,51,25,0.6); 
      font-weight:300;
    }

    #timeline-section { 
      height:auto; 
      display:flex; 
      align-items:center; 
      will-change:transform; 
      padding: 40px 40px;
      gap: 30px;
      overflow-x: auto;
      scroll-behavior: smooth;
      overflow-y: hidden;
    }

    .timeline-item { 
      flex: 0 0 calc(25% - 22.5px); 
      min-width: 280px;
      display:flex; 
      flex-direction:column; 
    }

    .timeline-card {
      background: #fff;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.1);
      transition: transform .3s, box-shadow .3s;
      height: 100%;
      display: flex;
      flex-direction: column;
    }

    .timeline-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.15);
    }

    .timeline-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      display: block;
    }

    .timeline-text {
      padding: 25px;
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .timeline-text h3 {
      margin: 0 0 10px 0;
      font-size: 1.3rem;
      font-family: 'Noto Serif TC', serif;
      color: #2d3319;
      font-weight: 600;
    }

    .timeline-year {
      font-size: 0.95rem;
      color: rgba(101,132,101,0.8);
      margin-bottom: 12px;
      font-weight: 500;
    }

    .timeline-text p {
      margin: 0;
      font-size: 0.95rem;
      color: rgba(45,51,25,0.75);
      line-height: 1.6;
      flex: 1;
    }

    .source {
      font-size: 0.8rem;
      color: rgba(45,51,25,0.5);
      font-style: italic;
      margin-top: 10px;
    }

    .timeline-footer {
      text-align: center;
      margin-top: 40px;
      color: rgba(45,51,25,0.5);
      font-size: 0.95rem;
    }

    .scroll-hint{ 
      position:fixed; 
      bottom:50px; 
      left:50%; 
      transform:translateX(-50%); 
      z-index:50; 
      color:rgba(45,51,25,0.6); 
      font-size:.95rem; 
      display:flex; 
      gap:10px; 
      align-items:center; 
    }
    .scroll-hint .arrow{ animation: slideRight 2s infinite; }
    @keyframes slideRight{0%,100%{transform:translateX(0);opacity:.5}50%{transform:translateX(10px);opacity:1}}

    /* ---------- Awakening section kept minimal (no hashtag here) ---------- */
    #awakening{ min-height:100vh; padding:120px 50px; text-align:center; background: linear-gradient(135deg, rgba(236,199,109,0.08), rgba(245,240,232,1)); }
    #awakening h2{ font-family:'Noto Serif TC', serif; font-size:3rem; color:#2d3319; margin-bottom:20px; }
    #awakening p{ max-width:900px; margin: 0 auto 40px; color:rgba(45,51,25,0.75); line-height:1.9; }

    /* ---------- Hashtag page (separate) ---------- */
    #hashtag-page{ min-height:100vh; position:relative; background:#fff; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:80px 20px; }
    #hashtag-container{ position:absolute; inset:0; pointer-events:none; overflow:hidden; }
    .hashtag{ position:absolute; color:#2d3319; font-weight:700; white-space:nowrap; pointer-events:none; text-shadow: 0 2px 8px rgba(255,255,255,0.4); }

    /* ---------- Reels grid ---------- */
    #reels-grid{ width:90%; max-width:1100px; margin:80px auto; display:grid; grid-template-columns:repeat(4,1fr); gap:24px; padding-bottom:120px; }
    .reel-item{ border-radius:12px; overflow:hidden; background:#e6e6e6; position:relative; aspect-ratio:9/16; box-shadow:0 8px 25px rgba(0,0,0,0.12); cursor:pointer; }
    .reel-item video{ width:100%; height:100%; object-fit:cover; display:block; }
    .reel-overlay{ position:absolute; inset:0; display:flex; align-items:center; justify-content:center; color:rgba(255,255,255,0.95); font-size:2.2rem; pointer-events:none; }

    /* ---------- Footer / sections ---------- */
    .chapter-section{ min-height:100vh; display:flex; flex-direction:column; align-items:center; justify-content:center; padding:100px 50px; text-align:center; }
    .chapter-section h2{ font-family:'Noto Serif TC', serif; font-size:3.5rem; color:#2d3319; margin-bottom:24px; }
    .chapter-section p{ max-width:900px; color:rgba(45,51,25,0.75); line-height:1.9; }

    /* ---------- Text Section (詳細說明) ---------- */
    .text-section {
      padding: 80px 50px;
      background: #f5f0e8;
      max-width: 1000px;
      margin: 0 auto;
      line-height: 1.8;
    }

    .text-section h2 {
      font-family: 'Noto Serif TC', serif;
      font-size: 2.8rem;
      color: #2d3319;
      margin-bottom: 30px;
      letter-spacing: 0.1em;
    }

    .text-section h3 {
      font-family: 'Noto Serif TC', serif;
      font-size: 1.6rem;
      color: #2d3319;
      margin-top: 40px;
      margin-bottom: 15px;
      font-weight: 600;
    }

    .text-section p {
      font-size: 1rem;
      color: rgba(45,51,25,0.8);
      margin-bottom: 20px;
      line-height: 1.8;
    }

    .text-section em {
      color: rgba(45,51,25,0.6);
      display: block;
      margin-top: 10px;
      font-size: 0.95rem;
    }

    .text-section ul,
    .text-section ol {
      margin: 20px 0 20px 40px;
      color: rgba(45,51,25,0.75);
    }

    .text-section li {
      margin-bottom: 12px;
      line-height: 1.7;
    }

    /* ---------- Reflection Section (投票) ---------- */
    .reflection-section {
      padding: 80px 20px;
      background: linear-gradient(135deg, rgba(255,255,255,1), rgba(245,240,232,0.5));
    }

    .reflection-section h2 {
      text-align: center;
      font-family: 'Noto Serif TC', serif;
      font-size: 2.8rem;
      color: #2d3319;
      margin-bottom: 60px;
      letter-spacing: 0.1em;
    }

    .question-container {
      display: flex;
      flex-direction: column;
      gap: 30px;
      max-width: 850px;
      margin: 0 auto;
    }

    .question-card {
      background: #fff;
      padding: 30px;
      border-radius: 12px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease, opacity 0.5s ease;
      opacity: 0;
      transform: translateY(50px);
      border-left: 4px solid #656b65;
    }

    .question-card.visible {
      opacity: 1;
      transform: translateY(0);
    }

    .question-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 25px rgba(0,0,0,0.12);
    }

    .question-text {
      font-size: 1.1rem;
      color: #2d3319;
      margin-bottom: 25px;
      line-height: 1.7;
      font-weight: 500;
    }

    .vote-buttons {
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }

    .vote-buttons button {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      background-color: #656b65;
      color: #fff;
      font-size: 0.95rem;
      font-weight: 500;
      transition: background 0.2s, transform 0.2s;
      font-family: 'Noto Sans TC', sans-serif;
    }

    .vote-buttons button:hover {
      background-color: #505550;
      transform: scale(1.05);
    }

    .vote-buttons button:active {
      transform: scale(0.98);
    }

    .vote-result {
      margin-left: 10px;
      font-style: italic;
      color: #656b65;
      font-weight: 600;
    }

    /* responsive */
    @media (max-width:900px){
      .intro-slice{ width:25%; left:auto; }
      .timeline-item{ min-width:80vw }
      #reels-grid{ grid-template-columns: repeat(2,1fr) }
      header{ padding:18px 24px }
      .photo-container{ width:80%; height:auto; aspect-ratio:4/3 }
      
      .text-section { padding: 50px 25px; }
      .text-section h2 { font-size: 2rem; }
      .text-section h3 { font-size: 1.3rem; }
      
      .reflection-section { padding: 50px 15px; }
      .reflection-section h2 { font-size: 2rem; margin-bottom: 40px; }
      .question-card { padding: 20px; }
      .question-text { font-size: 1rem; }
      .vote-buttons { gap: 10px; }
      .vote-buttons button { padding: 8px 15px; font-size: 0.85rem; }
    }
  </style>
</head>
<body>

  <!-- INTRO: 4 vertical slices (uses images/intro.jpg) -->
  <div id="intro-container" aria-hidden="true">
    <div class="intro-slice" style="left:0;"></div>
    <div class="intro-slice" style="left:25vw;"></div>
    <div class="intro-slice" style="left:50vw;"></div>
    <div class="intro-slice" style="left:75vw;"></div>
  </div>
  <!-- semi-transparent background / blur shown after intro -->
  <div id="intro-bg-overlay" aria-hidden="true"></div>
  
  <!-- Title shown after intro flip -->
  <div id="intro-title" aria-hidden="true">
    <h1>台灣感性</h1>
  </div>

  <!-- Header -->
  <header id="header">
    <div class="logo">台灣感性</div>
    <nav>
      <div data-target="map-section">序章</div>
      <div data-target="hashtag-page">喚起</div>
      <div data-target="timeline-wrapper">濾鏡</div>
      <div data-target="filter">反思</div>
      <div data-target="epilogue">結語</div>
    </nav>
  </header>

  <!-- ========== LANDING / MAP (original map kept) ========== -->
  <section id="map-section">
    <div id="map"></div>
    <div id="map-overlay"></div>

    <div class="photo-container" id="photo-taipei">
      <img src="images/taipei.jpg" alt="台北">
      <div class="photo-caption">
        <h3>台北</h3>
        <p>TAIPEI</p>
      </div>
    </div>

    <div class="photo-container" id="photo-taichung">
      <img src="images/taichung.jpg" alt="台中">
      <div class="photo-caption">
        <h3>台中</h3>
        <p>TAICHUNG</p>
      </div>
    </div>

    <div class="photo-container" id="photo-tainan">
      <img src="images/tainan.jpg" alt="台南">
      <div class="photo-caption">
        <h3>台南</h3>
        <p>TAINAN</p>
      </div>
    </div>

    <div class="photo-container" id="photo-hualien">
      <img src="images/hualien.jpg" alt="花蓮">
      <div class="photo-caption">
        <h3>花蓮</h3>
        <p>HUALIEN</p>
      </div>
    </div>

    <div id="scroll-indicator">
      <div class="line"></div>
      <span>SCROLL</span>
    </div>
  </section>

  <!--序章-->
  <section class="chapter-intro">
    <h1>序章</h1>
    <p>從「中華民國美學」到「台灣感性」<br>一段關於街景、美學與認同的討論歷程</p>
  </section>

  <!-- CHAPTER 1: Full-screen image with title -->
  <section id="chapter1" class="chapter-cover">
    <div class="chapter-cover-overlay"></div>
    <div class="chapter-cover-content">
      <h1>Chapter 1</h1>
      <p>喚起感性：什麼是台灣感性?</p>
    </div>
  </section>

  <!-- CHAPTER 1 TEXT INTRODUCTION -->
  <section id="chapter1-intro" class="chapter-section" style="background: linear-gradient(135deg, rgba(236,199,109,0.08), rgba(245,240,232,1));">
    <h2>Chapter 1：喚起感性</h2>
    <p>在過去的數十年間，台灣的街道景觀經歷了劇烈的變化。從日治時期遺留下來的建築脈絡，到戰後快速都市化的衝擊，再到當代對「美」的重新思考——這是一段從批判走向理解，從改造走向共生的過程。</p>
    <p>「台灣感性」並非單一的美學標準，而是理解這片土地上多元共存的感性經驗。它包含了對在地文化的尊重、對日常生活的觀察，以及對不同世代、階層、地域審美差異的包容。</p>
    <p>讓我們一起探索台灣感性的起源與演變，理解那些被忽視的街角、那些看似混亂卻充滿故事的視覺語言。</p>
  </section>

  <!-- TIMELINE SECTION: 街景時間軸 -->
  <section id="timeline-wrapper" class="timeline-section">
    <div class="timeline-header">
      <h2>台灣街景時間軸</h2>
      <p>探索台灣街道景觀的演變歷程</p>
    </div>

    <div class="timeline-container" id="timeline-section">
      <!-- 時間段1: 1895–1945 日治時代 -->
      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t1_1.jpg" alt="日治時代街景1">
          <div class="timeline-text">
            <h3>1895–1945 日治時代</h3>
            <div class="timeline-year">街景：雙重建築語彙與混雜風格</div>
            <p>這一時期的街道呈現西式洋樓與台灣傳統市井混合的景觀，如迪化街、六館街尾洋式店屋等。建築風格呈現殖民與本地文化交疊。</p>
            <div class="source">來源: Wikipedia, Storystudio</div>
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t1_2.jpg" alt="日治時代街景2">
          <div class="timeline-text">
            <h3>1895–1945 日治時代</h3>
            <div class="timeline-year">建築與街道骨架初具現代化</div>
            <p>畫家陳澄波的《夏日街景》記錄了日治時期街道景象，展現文化混血與多樣性。</p>
            <div class="source">來源: Wikipedia</div>
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t1_3.jpeg" alt="日治時代街景3">
          <div class="timeline-text">
            <h3>1895–1945 日治時代</h3>
            <div class="timeline-year">城市景觀混合</div>
            <p>傳統漢式磚瓦房屋與西式建築並存，形成多元文化的街景特徵。</p>
            <div class="source">來源: BOCH 台北市歷史建築</div>
          </div>
        </div>
      </div>

      <!-- 時間段2: 1945–1980s 戰後時期 -->
      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t2_1.jpg" alt="戰後街景1">
          <div class="timeline-text">
            <h3>1945–1980s 戰後時期</h3>
            <div class="timeline-year">中華民國美學</div>
            <p>戰後快速都市化，公寓與集合住宅大量興建，但外觀設計追求效率，招牌與布條混亂，使街景呈現雜亂但便利的特質。</p>
            <div class="source">來源: The News Lens</div>
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t2_2.jpg" alt="戰後街景2">
          <div class="timeline-text">
            <h3>1945–1980s 戰後時期</h3>
            <div class="timeline-year">功能與秩序優先</div>
            <p>街道功能性佔優勢，城市快速擴張，但美學與景觀設計多被犧牲，形成混亂街道風貌。</p>
            <div class="source">來源: The News Lens</div>
          </div>
        </div>
      </div>

      <!-- 時間段3: 1990s–2000s 經濟與消費成熟 -->
      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t3_1.jpg" alt="1990s街景1">
          <div class="timeline-text">
            <h3>1990s–2000s</h3>
            <div class="timeline-year">街景多樣化與商業招牌文化</div>
            <p>隨著經濟發展與消費社會成熟，街道上的招牌、小吃店、摩托車停放頻繁，街景豐富多元，也更雜亂。</p>
            <div class="source">來源: Eliteracy, The News Lens</div>
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t3_2.jpg" alt="1990s街景2">
          <div class="timeline-text">
            <h3>1990s–2000s</h3>
            <div class="timeline-year">生活美學萌芽</div>
            <p>對老街、傳統市場和巷弄的重新審視，街景的混亂被視為生活氣息，逐漸出現生活美學的討論。</p>
            <div class="source">來源: The News Lens</div>
          </div>
        </div>
      </div>

      <!-- 時間段4: 2017–至今 臺灣感性 -->
      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t4_1.jpg" alt="BRUTUS 2017封面">
          <div class="timeline-text">
            <h3>2017–至今</h3>
            <div class="timeline-year">BRUTUS 封面事件 / 臺灣感性</div>
            <p>2017年，BRUTUS 第 851 期封面以國華街街景，引發廣泛討論。有人認為「醜」，有人認為「真實生活美學」的展現。</p>
            <div class="source">來源: The News Lens, FTV News</div>
          </div>
        </div>
      </div>

      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t4_2.jpg" alt="當代街景2">
          <div class="timeline-text">
            <h3>2017–至今</h3>
            <div class="timeline-year">後殖民景觀 / 異質美學</div>
            <p>學者以後殖民景觀、異質美學理解台灣街景，不再追求統一美感，而強調生活感、多元與文化記憶。</p>
            <div class="source">來源: The News Lens</div>
          </div>
        </div>
      </div>


      <div class="timeline-item">
        <div class="timeline-card">
          <img src="images/t4_3.jpg" alt="當代街景3">
          <div class="timeline-text">
            <h3>2017–至今</h3>
            <div class="timeline-year">國際視角 / 文化符號</div>
            <p>國際媒體與他國觀察者欣賞台灣街景，促使社會重新認識街道美學與文化價值。</p>
            <div class="source">來源:talkacemedia </div>
          </div>
        </div>
      </div>
    </div>

    <div class="timeline-footer">
      <p>向左滑動探索更多內容 ←</p>
    </div>
  </section>

  <!-- 時間軸詳細說明 section -->
  <section class="text-section">
    <h2>台灣街景：從「實用主義」到「臺灣感性」</h2>

    <p>台灣的街景，是一部城市、社會與文化交錯運轉的流動史。它不只是建築外觀的變遷，也是生活方式、價值觀念、身份認同與美學觀察交織的結果。透過時間軸，我們看到街道從殖民混合、戰後實用、消費文明，到如今被重新認識與再詮釋的過程。</p>

    <h3>日治時期 — 西洋與在地的混血街景（1895–1945）</h3>
    <p>街道呈現建築與文化的雙重語彙融合。六館街尾洋式店屋是經典例子：洋式店屋立面採巴洛克／文藝復興建築語彙，同時底下承載本地商業與生活功能。這種混雜不是亂，而是歷史與文化交疊的生活語彙，正如陳澄波《夏日街景》捕捉到的日治時期台灣多維城市美。<br>
    <em>來源: Wikipedia, Storystudio</em></p>

    <h3>戰後至 1980 年代 — 功能優先、實用主義的「中華民國美學」</h3>
    <p>戰後人口劇增，大量農村人口遷入城市，出現大量集合住宅、公寓，建築以效率與速度為優先，街屋外觀簡陋、陽台外推、鐵皮加蓋。商業活動復甦，招牌、布條、電線、燈箱大量出現，使街景視覺呈現複雜性與雜揉感，形成所謂「中華民國美學」。<br>
    <em>來源: The News Lens, Taiwan NGO</em></p>

    <h3>1990s–2000s — 消費社會成熟、街道多樣化與「生活美學」萌芽</h3>
    <p>隨著經濟發展，街道充滿小吃店、商家與服務業，舊市場與老街重新活躍。學者、文化工作者開始以「懷舊」、「在地性」、「庶民文化」視角重新看待過去被貶抑為「亂」、「醜」的街景，生活美學逐漸萌芽，街景成為消費、記憶、認同與文化流動的承載場域。<br>
    <em>來源: The News Lens, NCCU 論文</em></p>

    <h3>2017 以後 — 外部凝視、文化詮釋與「臺灣感性」</h3>
    <p>2017 年 BRUTUS 雜誌台灣特輯封面，引發社會對「美醜」與「真實生活感」的討論。街景不再被要求服從歐洲／現代主義設計原則，而成為台灣身份記憶、在地文化、生活節奏與城市故事的可視化書寫。後殖民景觀與異質美學的角度，重新認識台灣街景價值。<br>
    <em>來源: The News Lens, FTV News</em></p>

    <h3>參考來源</h3>
    <ul>
      <li>「Taiwanese Rediscovering their History in the Streets of Taipei」— The News Lens</li>
      <li>BRUTUS 雜誌台灣特輯封面討論 — The News Lens</li>
      <li>老街保存與地方記憶研究 — NCCU 論文</li>
      <li>《夏日街景》（1927）— Wikipedia</li>
    </ul>
  </section>

  <!-- 延伸思考 / 互動投票 section -->
  <section class="reflection-section">
    <h2>延伸思考 / 開放式問題</h2>
    <div class="question-container">

      <!-- 問題1 -->
      <div class="question-card" id="q1">
        <p class="question-text">
          1. 台灣街景的「醜」與「美」經常被討論，但究竟什麼構成街景之美？是整齊劃一的視覺秩序，還是生活氣息與文化記憶的真實呈現？
        </p>
        <div class="vote-buttons">
          <button onclick="vote('q1','a')">整齊秩序</button>
          <button onclick="vote('q1','b')">生活氣息</button>
          <span class="vote-result" id="q1-result">尚未投票</span>
        </div>
      </div>

      <!-- 問題2 -->
      <div class="question-card" id="q2">
        <p class="question-text">
          2. 每一條街道、每一個招牌都承載著歷史與生活記憶。街景是否能成為城市居民認同感、地方文化與歷史連續性的承載者？
        </p>
        <div class="vote-buttons">
          <button onclick="vote('q2','a')">是</button>
          <button onclick="vote('q2','b')">否</button>
          <span class="vote-result" id="q2-result">尚未投票</span>
        </div>
      </div>

      <!-- 問題3 -->
      <div class="question-card" id="q3">
        <p class="question-text">
          3. 在快速現代化與都市更新的浪潮中，哪些街景值得保存？哪些又可以創造新的生命？
        </p>
        <div class="vote-buttons">
          <button onclick="vote('q3','a')">保存歷史街景</button>
          <button onclick="vote('q3','b')">創造新生命</button>
          <span class="vote-result" id="q3-result">尚未投票</span>
        </div>
      </div>

    </div>
  </section>

  <!-- AWAKENING (no hashtag here per request) -->
  <section id="awakening" class="chapter-section">
    <h2>喚起</h2>
    <p>台灣感性是一種關於氣味、街道、光線、溫度與日常情緒的集合體。它不是被設計出來的美，而是生活累積的溫柔證據。</p>
    <!-- IG style hashtag area moved to separate page -->
    <!-- Reels grid below in its own section -->
  </section>

  <!-- Reels grid (8 placeholder videos) -->
  <section id="reels-grid">
    <!-- sample short mp4 source; replace with your own video files/paths -->
    <div class="reel-item"><video muted loop preload="none" src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4"></video><div class="reel-overlay">▶</div></div>
    <div class="reel-item"><video muted loop preload="none" src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4"></video><div class="reel-overlay">▶</div></div>
    <div class="reel-item"><video muted loop preload="none" src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4"></video><div class="reel-overlay">▶</div></div>
    <div class="reel-item"><video muted loop preload="none" src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4"></video><div class="reel-overlay">▶</div></div>
    <div class="reel-item"><video muted loop preload="none" src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4"></video><div class="reel-overlay">▶</div></div>
    <div class="reel-item"><video muted loop preload="none" src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4"></video><div class="reel-overlay">▶</div></div>
    <div class="reel-item"><video muted loop preload="none" src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4"></video><div class="reel-overlay">▶</div></div>
    <div class="reel-item"><video muted loop preload="none" src="https://samplelib.com/lib/preview/mp4/sample-5s.mp4"></video><div class="reel-overlay">▶</div></div>
  </section>

  <!-- HASHTAG PAGE: 独立一頁，有掉落 hashtag 效果 -->
  <section id="hashtag-page">
    <h1>#台灣感性</h1>
    <p>來自他者眼中的台灣感性印象</p>
    <div id="hashtag-container"></div>
  </section>

  <!-- FILTER / REFLECTION / EPILOGUE placeholders -->
  <section id="filter" class="chapter-section">
    <h2>濾鏡</h2>
    <p>（在此加入濾鏡 / 視覺語彙解析）</p>
  </section>

  <section id="reflection" class="chapter-section">
    <h2>反思</h2>
    <p>（在此加入討論與批判）</p>
  </section>

  <section id="epilogue" class="chapter-section" style="background:#2d3319;color:#f5f0e8">
    <h2>結語</h2>
    <p>（結語：台灣感性如何繼續被理解與傳承）</p>
  </section>

<script>
  // Ensure Chapter1 background image is loaded
  const chapter1 = document.getElementById('chapter1');
  if (chapter1) {
    const img = new Image();
    img.onload = function() {
      chapter1.style.backgroundImage = "url('./images/c1.jpg')";
    };
    img.onerror = function() {
      console.warn('Failed to load chapter1 background image');
      chapter1.style.backgroundColor = '#f5f0e8';
    };
    img.src = './images/c1.jpg';
  }

  /* -------------------------
     Intro flip animation (total ~8-10s)
     - flips 4 slices with overlap
     - then shows semi-transparent overlay (intro-bg-overlay)
     - then hides intro container
  ------------------------- */
  gsap.registerPlugin(ScrollTrigger);

  const slices = document.querySelectorAll('#intro-container .intro-slice');
  const overlay = document.getElementById('intro-bg-overlay');
  const titleEl = document.getElementById('intro-title');

  // ensure slices fill with correct background positions (for some browsers)
  slices.forEach((s, idx) => {
    const pos = idx * 33;
    s.style.backgroundPosition = `${idx * 33}% 50%`;
  });

  const introTL = gsap.timeline({
    delay: 0.6,
    defaults: { ease: "power2.inOut" }
  });

  // sequence: each slice rotates Y to -90 (like flipping away)
  introTL.to(slices[0], { duration: 1.2, rotateY: -90 }, 0);
  introTL.to(slices[1], { duration: 1.2, rotateY: -90 }, 0.2);
  introTL.to(slices[2], { duration: 1.2, rotateY: -90 }, 0.4);
  introTL.to(slices[3], { duration: 1.2, rotateY: -180 }, 0.6); // flip all the way for 4th slice

  // hide intro container after flips
  introTL.set('#intro-container', { display: 'none' }, "+=0.3");

  // after flips complete, fade in title
  introTL.to(titleEl, { duration: 1, opacity: 1 }, "+=0.2");
  
  // keep title for 5 seconds, then fade out
  introTL.to(titleEl, { duration: 1, opacity: 0 }, "+=5");

  // hide title container ONLY after fade out
  introTL.set(titleEl, { pointerEvents: 'none' });

  /* -------------------------
     Header scroll behaviour
  ------------------------- */
  const header = document.getElementById('header');
  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) header.classList.add('scrolled');
    else header.classList.remove('scrolled');
  });

  /* -------------------------
     MAPBOX setup (kept from your original)
     - Replace token if you have your own
  ------------------------- */
  mapboxgl.accessToken = 'pk.eyJ1IjoicjEyMjI3MTA2IiwiYSI6ImNtaHJneXdqbDBxbjkyaXM3bnJiOTFraHcifQ.BZIX8VBFwjl65YN9CiM6Hw';

  const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',
    center: [120.9, 23.8],
    zoom: 7,
    pitch: 0,
    bearing: 0
  });

  // disable map interactions for landing scroll-controlled experience
  map.scrollZoom.disable();
  map.dragPan.disable();
  map.dragRotate.disable();
  map.keyboard.disable();
  map.doubleClickZoom.disable();
  map.touchZoomRotate.disable();

  const locations = [
    { name: '全台', coords: [120.9, 23.8], zoom: 7, photo: null },
    { name: '台北', coords: [121.5654, 25.0330], zoom: 11, photo: 'photo-taipei' },
    { name: '台中', coords: [120.6736, 24.1477], zoom: 11, photo: 'photo-taichung' },
    { name: '台南', coords: [120.2513, 22.9908], zoom: 11, photo: 'photo-tainan' },
    { name: '花蓮', coords: [121.6015, 23.9937], zoom: 10.5, photo: 'photo-hualien' }
  ];

  const photos = {};
  locations.forEach(loc => {
    if (loc.photo) photos[loc.photo] = document.getElementById(loc.photo);
  });

  let currentIndex = -1;
  let mapScrollInitialized = false;
  
  // Function to initialize map scroll trigger
  function initMapScroll() {
    if (mapScrollInitialized) return;
    mapScrollInitialized = true;
    
    ScrollTrigger.create({
      trigger: '#map-section',
      start: 'top top',
      end: '+=700%',
      scrub: 2,
      pin: true,
      onUpdate: self => {
        if (!map.isSourceLoaded('composite')) return;
        const progress = self.progress;
        const total = locations.length;
        locations.forEach((loc, index) => {
          // For each location, spread them across the scroll progress
          // Each location gets ~20% of the total scroll range
          const start = (index / total) - 0.05;
          const end = ((index + 1) / total) + 0.05;
          const t = Math.max(0, Math.min(1, (progress - start) / (end - start)));
          
          if (t > 0.1 && t < 0.9) {
            if (currentIndex !== index) {
              currentIndex = index;
              console.log(`Showing location ${index}: ${loc.name}`);
              try {
                map.flyTo({ center: loc.coords, zoom: loc.zoom, duration: 1200, essential: true });
              } catch(e) {
                console.error('Map flyTo error:', e);
              }
              Object.values(photos).forEach(p => { if (p) p.classList.remove('show'); });
              if (loc.photo && photos[loc.photo]) {
                setTimeout(()=> {
                  photos[loc.photo].classList.add('show');
                  const overlay = document.getElementById('map-overlay');
                  if (overlay) overlay.classList.add('show');
                }, 500);
              } else {
                const overlay = document.getElementById('map-overlay');
                if (overlay) overlay.classList.remove('show');
              }
            }
          }
        });
      }
    });
  }
  
  // Initialize on map load, or fallback after delay
  map.on('load', initMapScroll);
  setTimeout(initMapScroll, 3000); // fallback if load event doesn't fire

  /* -------------------------
     TIMELINE horizontal GSAP scroll (optional - native scroll also works)
  ------------------------- */
  const timelineWrapper = document.getElementById('timeline-wrapper');
  const timelineSection = document.getElementById('timeline-section');
  
  // Remove old GSAP timeline scroll if not needed, keep native scroll instead
  // If you want GSAP scroll trigger, uncomment below:
  /*
  function setupTimelineScroll(){
    const items = document.querySelectorAll('.timeline-item');
    if (items.length === 0) return;
    
    const containerWidth = timelineSection.offsetWidth;
    const scrollWidth = timelineSection.scrollWidth;
    
    gsap.to(timelineSection, {
      x: () => -(scrollWidth - containerWidth),
      ease: 'none',
      scrollTrigger: {
        trigger: '#timeline-wrapper',
        start: 'top top',
        end: () => `+=${scrollWidth}`,
        scrub: 1,
        pin: true,
        anticipatePin: 1,
        invalidateOnRefresh: true
      }
    });
  }
  window.addEventListener('load', setupTimelineScroll);
  window.addEventListener('resize', () => { ScrollTrigger.refresh(); });
  */

  /* -------------------------
     REELS hover play
  ------------------------- */
  document.querySelectorAll('.reel-item').forEach(item => {
    const v = item.querySelector('video');
    item.addEventListener('mouseenter', () => { v.play().catch(()=>{}); });
    item.addEventListener('mouseleave', () => { v.pause(); });
    // click to toggle mute / unmute or open lightbox (simple toggle here)
    item.addEventListener('click', () => {
      if (v.paused) v.play(); else v.pause();
    });
  });

  /* -------------------------
     Hashtag page: falling tags (only on hashtag-page view)
  ------------------------- */
  const hashtags = [
    "#台灣感性","#臺灣感性","#대만감성","#TaiwanVibes","#巷弄文化","#夜市生活","#Newtro","#生活感","#復古現代","#質感生活"
  ];
  const hashtagPage = document.getElementById('hashtag-page');
  const hashtagContainer = document.getElementById('hashtag-container');
  let hashtagInterval = null;

  function spawnHashtag(){
    const tag = document.createElement('div');
    tag.className = 'hashtag';
    tag.innerText = hashtags[Math.floor(Math.random()*hashtags.length)];
    const size = 14 + Math.random()*26;
    tag.style.fontSize = size + 'px';
    const left = Math.random()*85; // percent
    tag.style.left = left + '%';
    tag.style.top = '-60px';
    tag.style.opacity = 0.9;
    hashtagContainer.appendChild(tag);

    const distance = (hashtagPage.clientHeight + 120);
    const duration = 3 + Math.random()*2;
    gsap.to(tag, { top: distance, duration, ease: "power1.in", onComplete: ()=> tag.remove() });
  }

  const hashtagObserver = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        if (!hashtagInterval) {
          // spawn a few immediately
          for(let i=0;i<3;i++){ setTimeout(spawnHashtag, i*200); }
          hashtagInterval = setInterval(spawnHashtag, 700);
        }
      } else {
        if (hashtagInterval) { clearInterval(hashtagInterval); hashtagInterval = null; }
      }
    });
  }, { threshold: 0.2 });

  hashtagObserver.observe(hashtagPage);

  /* -------------------------
     Navigation click scroll (smooth)
  ------------------------- */
  document.querySelectorAll('header nav div').forEach(el => {
    el.addEventListener('click', (e) => {
      const t = e.target.getAttribute('data-target');
      if (!t) return;
      const elTarget = document.getElementById(t);
      if (elTarget) elTarget.scrollIntoView({ behavior: 'smooth' });
    });
  });

  /* -------------------------
     Accessibility / mobile considerations
  ------------------------- */
  // Ensure videos are allowed to play muted on mobile (they must be muted to autoplay)
  document.querySelectorAll('video').forEach(v => { v.muted = true; v.playsInline = true; });

  /* -------------------------
     投票功能與卡片淡入動畫
  ------------------------- */
  const voteCounts = { q1: { a: 0, b: 0 }, q2: { a: 0, b: 0 }, q3: { a: 0, b: 0 } };

  window.vote = function(question, choice) {
    voteCounts[question][choice]++;
    const total = voteCounts[question].a + voteCounts[question].b;
    const percentA = Math.round((voteCounts[question].a / total) * 100);
    const percentB = Math.round((voteCounts[question].b / total) * 100);
    document.getElementById(`${question}-result`).innerText = 
      `結果：${percentA}% / ${percentB}%`;
  };

  // 問卷卡片淡入效果
  const cards = document.querySelectorAll('.question-card');
  const observerOptions = { threshold: 0.2 };
  const cardObserver = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, observerOptions);

  cards.forEach(card => cardObserver.observe(card));

</script>
</body>
</html>
